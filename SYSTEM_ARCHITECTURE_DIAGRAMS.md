# ðŸŽ¨ LiquidityGuard AI - System Architecture Diagrams

---

## ðŸ“Š Complete System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LIQUIDITYGUARD AI SYSTEM                             â”‚
â”‚                     AI-Powered Liquidation Protection                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EXTERNAL SERVICES  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ ðŸ”— Chainlink Oracles (Price Feeds)
         â”œâ”€â”€â”€ ðŸ“Š CoinGecko API (Backup Prices)
         â”œâ”€â”€â”€ ðŸ”¥ 1inch Fusion+ API (Gasless Swaps)
         â”œâ”€â”€â”€ ðŸ“ˆ DeFi Llama (Protocol APYs)
         â”œâ”€â”€â”€ ðŸŒ‰ LayerZero Bridge (Cross-Chain)
         â”œâ”€â”€â”€ ðŸŒ The Graph (Position Data)
         â””â”€â”€â”€ ðŸ¤– MeTTa AI (Symbolic Reasoning)
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FETCH.AI ALMANAC                                 â”‚
â”‚                       (Decentralized Agent Registry)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Agents Register & Discover
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 1 â”‚  â”‚ Agent 2 â”‚  â”‚ Agent 3 â”‚  â”‚ Agent 4 â”‚
â”‚ Monitor â”‚  â”‚ Optimizerâ”‚  â”‚  Swap   â”‚  â”‚ Executorâ”‚
â”‚ Port:   â”‚  â”‚ Port:   â”‚  â”‚ Port:   â”‚  â”‚ Port:   â”‚
â”‚ 8000    â”‚  â”‚ 8001    â”‚  â”‚ 8002    â”‚  â”‚ 8003    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Complete Message Flow (End-to-End)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STEP-BY-STEP EXECUTION                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: POSITION MONITORING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ  POSITION MONITOR AGENT (Port 8000)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  Every 30 seconds:                                                       â”‚
â”‚  1. Fetch prices from Chainlink/CoinGecko                               â”‚
â”‚     â”œâ”€ ETH: $3,200                                                       â”‚
â”‚     â”œâ”€ USDC: $1.00                                                       â”‚
â”‚     â””â”€ WBTC: $45,000                                                     â”‚
â”‚                                                                          â”‚
â”‚  2. Monitor Demo Position:                                               â”‚
â”‚     â”œâ”€ User: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0               â”‚
â”‚     â”œâ”€ Protocol: Aave (Ethereum)                                         â”‚
â”‚     â”œâ”€ Collateral: 2.0 ETH = $6,400                                     â”‚
â”‚     â””â”€ Debt: $5,000 USDC                                                â”‚
â”‚                                                                          â”‚
â”‚  3. Calculate Health Factor:                                             â”‚
â”‚     HF = (Collateral Ã— Liquidation Threshold) / Debt                     â”‚
â”‚     HF = ($6,400 Ã— 0.85) / $5,000                                        â”‚
â”‚     HF = $5,440 / $5,000                                                 â”‚
â”‚     HF = 1.09 âš ï¸ CRITICAL!                                               â”‚
â”‚                                                                          â”‚
â”‚  4. MeTTa AI Risk Assessment:                                            â”‚
â”‚     â”œâ”€ Risk Level: CRITICAL                                              â”‚
â”‚     â”œâ”€ Liquidation Probability: 85%                                      â”‚
â”‚     â”œâ”€ Urgency Score: 8/10                                               â”‚
â”‚     â””â”€ Priority: EMERGENCY                                               â”‚
â”‚                                                                          â”‚
â”‚  5. âš ï¸ SEND ALERT âš ï¸                                                     â”‚
â”‚     â””â”€ To: Yield Optimizer (agent1q0rtan6y...)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ [PositionAlert]
                                    â”‚ {
                                    â”‚   user_address: "0x742d35...",
                                    â”‚   health_factor: 1.09,
                                    â”‚   collateral_value: 6400,
                                    â”‚   debt_value: 5000,
                                    â”‚   risk_level: "critical"
                                    â”‚ }
                                    â–¼

STEP 2: YIELD OPTIMIZATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ’° YIELD OPTIMIZER AGENT (Port 8001)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. âš ï¸ ALERT RECEIVED                                                    â”‚
â”‚     â”œâ”€ User: 0x742d35...                                                 â”‚
â”‚     â”œâ”€ Health Factor: 1.09 (CRITICAL!)                                   â”‚
â”‚     â””â”€ Current Protocol: Aave (Ethereum)                                 â”‚
â”‚                                                                          â”‚
â”‚  2. Query DeFi Llama for Current APY:                                    â”‚
â”‚     â””â”€ Aave ETH: 5.20%                                                   â”‚
â”‚                                                                          â”‚
â”‚  3. Find Best Alternative Yields:                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚     â”‚ Protocol      Chain      Asset   APY        â”‚                     â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚     â”‚ Aave         Ethereum    ETH     5.20% â¬… NOWâ”‚                     â”‚
â”‚     â”‚ Compound     Ethereum    ETH     6.80%      â”‚                     â”‚
â”‚     â”‚ Lido         Ethereum    ETH     7.50% â¬… âœ… â”‚                     â”‚
â”‚     â”‚ Kamino       Solana      SOL     9.10%      â”‚ (cross-chain)      â”‚
â”‚     â”‚ Drift        Solana      USDC    8.30%      â”‚ (cross-chain)      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                          â”‚
â”‚  4. Calculate Profitability (Lido):                                      â”‚
â”‚     â”œâ”€ APY Improvement: 7.50% - 5.20% = +2.30%                          â”‚
â”‚     â”œâ”€ Annual Extra: $6,400 Ã— 2.30% = $147.20/year                      â”‚
â”‚     â”œâ”€ Rebalancing Cost: ~$50 (gas + fees)                              â”‚
â”‚     â””â”€ Break-even: ($50 Ã— 12) / $147.20 = 4.1 months âœ…                 â”‚
â”‚                                                                          â”‚
â”‚  5. MeTTa AI Strategy Scoring:                                           â”‚
â”‚     â”œâ”€ APY Score: 18.4/30 (based on improvement)                        â”‚
â”‚     â”œâ”€ Break-even Score: 10/20 (4.1 months)                             â”‚
â”‚     â”œâ”€ Urgency Score: 12/15 (HF 1.09 critical)                          â”‚
â”‚     â”œâ”€ Amount Score: 2/35 ($6,400 position)                             â”‚
â”‚     â””â”€ Total Score: 42.4/100 (PROFITABLE!)                              â”‚
â”‚                                                                          â”‚
â”‚  6. Build Rebalancing Strategy:                                          â”‚
â”‚     â”œâ”€ Step 1: Withdraw from Aave                                        â”‚
â”‚     â”œâ”€ Step 2: Swap via 1inch Fusion+ (GASLESS!)                        â”‚
â”‚     â””â”€ Step 3: Deposit to Lido                                           â”‚
â”‚                                                                          â”‚
â”‚  7. âœ… SEND STRATEGY âœ…                                                  â”‚
â”‚     â””â”€ To: Swap Optimizer (agent1q2d8jkuh...)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ [RebalanceStrategy]
                                    â”‚ {
                                    â”‚   strategy_id: "a39de7f4...",
                                    â”‚   source_protocol: "aave",
                                    â”‚   target_protocol: "lido",
                                    â”‚   amount: 6400,
                                    â”‚   apy_improvement: 2.30,
                                    â”‚   execution_method: "direct_swap",
                                    â”‚   priority: "emergency"
                                    â”‚ }
                                    â–¼

STEP 3: FUSION+ SWAP ROUTE GENERATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”¥ SWAP OPTIMIZER AGENT (Port 8002)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. âš ï¸ STRATEGY RECEIVED                                                 â”‚
â”‚     â”œâ”€ From: Aave (Ethereum)                                             â”‚
â”‚     â”œâ”€ To: Lido (Ethereum)                                               â”‚
â”‚     â”œâ”€ Amount: $6,400 (2 ETH)                                            â”‚
â”‚     â””â”€ Priority: EMERGENCY                                               â”‚
â”‚                                                                          â”‚
â”‚  2. Detect Execution Path:                                               â”‚
â”‚     â”œâ”€ Same Chain? YES (Ethereum â†’ Ethereum)                            â”‚
â”‚     â”œâ”€ Method: Direct Swap (no bridge needed)                           â”‚
â”‚     â””â”€ Use 1inch Fusion+ for gasless swap                               â”‚
â”‚                                                                          â”‚
â”‚  3. Query 1inch Fusion+ API:                                             â”‚
â”‚     POST https://api.1inch.dev/fusion/quoter/v2.0/1/quote/receive       â”‚
â”‚     {                                                                    â”‚
â”‚       "srcTokenAddress": "0xEeeee...EEeE",  // ETH                      â”‚
â”‚       "dstTokenAddress": "0xae7ab...",      // stETH (Lido)             â”‚
â”‚       "amount": "2000000000000000000",       // 2 ETH                   â”‚
â”‚       "walletAddress": "0x742d35...",                                    â”‚
â”‚       "enableEstimate": true                                             â”‚
â”‚     }                                                                    â”‚
â”‚                                                                          â”‚
â”‚  4. Fusion+ Quote Response:                                              â”‚
â”‚     â”œâ”€ Destination Amount: 1.996 stETH (0.2% slippage)                  â”‚
â”‚     â”œâ”€ Recommended Preset: "fast"                                        â”‚
â”‚     â”œâ”€ Auction Duration: 30 seconds                                      â”‚
â”‚     â”œâ”€ Gas Paid By: RESOLVERS (User pays $0!)                           â”‚
â”‚     â””â”€ MEV Protection: ACTIVE (Dutch auction)                            â”‚
â”‚                                                                          â”‚
â”‚  5. Generate SwapRoute:                                                  â”‚
â”‚     â”œâ”€ Route ID: ef13047b-5985-4fc1-8dcf-966e528275e5                   â”‚
â”‚     â”œâ”€ Type: fusion_plus                                                 â”‚
â”‚     â”œâ”€ Gasless: YES âœ…                                                   â”‚
â”‚     â”œâ”€ MEV Protected: YES âœ…                                             â”‚
â”‚     â””â”€ Better Pricing: YES âœ… (competitive resolvers)                    â”‚
â”‚                                                                          â”‚
â”‚  6. MeTTa Route Scoring:                                                 â”‚
â”‚     â””â”€ Route Score: 46.0/100 (good route!)                              â”‚
â”‚                                                                          â”‚
â”‚  7. âœ… SEND ROUTE âœ…                                                     â”‚
â”‚     â””â”€ To: Cross-Chain Executor (agent1qtk56cc7...)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ [SwapRoute]
                                    â”‚ {
                                    â”‚   route_id: "ef13047b...",
                                    â”‚   from_token: "aave",
                                    â”‚   to_token: "lido",
                                    â”‚   amount: 6400,
                                    â”‚   transaction_data: {
                                    â”‚     type: "fusion_plus",
                                    â”‚     gasless: true,
                                    â”‚     mev_protected: true,
                                    â”‚     steps: [...]
                                    â”‚   }
                                    â”‚ }
                                    â–¼

STEP 4: MULTI-STEP EXECUTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš¡ CROSS-CHAIN EXECUTOR AGENT (Port 8003)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. âš ï¸ SWAP ROUTE RECEIVED                                               â”‚
â”‚     â”œâ”€ Route ID: ef13047b...                                             â”‚
â”‚     â”œâ”€ Type: fusion_plus                                                 â”‚
â”‚     â””â”€ Steps: 3 (Withdraw â†’ Swap â†’ Deposit)                             â”‚
â”‚                                                                          â”‚
â”‚  2. Execute Step 1/3: WITHDRAW                                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚     â”‚ Action: Withdraw from Aave                 â”‚                      â”‚
â”‚     â”‚ Protocol: Aave V3 (Ethereum)               â”‚                      â”‚
â”‚     â”‚ Amount: 2.0 ETH ($6,400)                   â”‚                      â”‚
â”‚     â”‚ Status: âœ… SIMULATED SUCCESS               â”‚                      â”‚
â”‚     â”‚ Duration: ~500ms                           â”‚                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  3. Execute Step 2/3: FUSION+ SWAP                                       â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚     â”‚ Action: Execute 1inch Fusion+ Swap         â”‚                      â”‚
â”‚     â”‚ Protocol: 1inch_fusion_plus                â”‚                      â”‚
â”‚     â”‚ From: 2.0 ETH                              â”‚                      â”‚
â”‚     â”‚ To: 1.996 stETH (Lido)                     â”‚                      â”‚
â”‚     â”‚ Gasless: YES â›½ (Resolvers pay!)           â”‚                      â”‚
â”‚     â”‚ MEV Protected: YES ðŸ›¡ï¸ (Dutch auction)     â”‚                      â”‚
â”‚     â”‚ Status: âœ… SIMULATED SUCCESS               â”‚                      â”‚
â”‚     â”‚ Duration: ~1000ms (auction + execution)    â”‚                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  4. Execute Step 3/3: DEPOSIT                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚     â”‚ Action: Deposit to Lido                    â”‚                      â”‚
â”‚     â”‚ Protocol: Lido (Ethereum)                  â”‚                      â”‚
â”‚     â”‚ Amount: 1.996 stETH (~$6,387)              â”‚                      â”‚
â”‚     â”‚ New APY: 7.50% (+2.30% improvement!)       â”‚                      â”‚
â”‚     â”‚ Status: âœ… SIMULATED SUCCESS               â”‚                      â”‚
â”‚     â”‚ Duration: ~500ms                           â”‚                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                          â”‚
â”‚  5. Calculate Results:                                                   â”‚
â”‚     â”œâ”€ Total Execution Time: ~2.0 seconds                               â”‚
â”‚     â”œâ”€ Gas Cost: $0 (GASLESS!)                                           â”‚
â”‚     â”œâ”€ Protocol Fee: ~$12.80 (0.2%)                                     â”‚
â”‚     â”œâ”€ New Health Factor: 1.08 â†’ 1.28 (SAFER!)                          â”‚
â”‚     â””â”€ Annual Extra Yield: $147.20                                       â”‚
â”‚                                                                          â”‚
â”‚  6. âœ… SEND RESULT âœ…                                                    â”‚
â”‚     â””â”€ To: Position Monitor (agent1qvvp0sl4x...)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ [ExecutionResult]
                                    â”‚ {
                                    â”‚   execution_id: "ef13047b...",
                                    â”‚   status: "success"
                                    â”‚ }
                                    â–¼

STEP 5: FEEDBACK CONFIRMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ  POSITION MONITOR AGENT (Feedback Loop)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. âœ… EXECUTION RESULT RECEIVED                                         â”‚
â”‚     â”œâ”€ Execution ID: ef13047b...                                         â”‚
â”‚     â”œâ”€ Status: SUCCESS                                                   â”‚
â”‚     â””â”€ From: Executor (agent1qtk56cc7...)                               â”‚
â”‚                                                                          â”‚
â”‚  2. Update Position Status:                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚ BEFORE:                    AFTER:                       â”‚         â”‚
â”‚     â”‚ â”œâ”€ Protocol: Aave          â”œâ”€ Protocol: Lido            â”‚         â”‚
â”‚     â”‚ â”œâ”€ APY: 5.20%              â”œâ”€ APY: 7.50% (+2.30%!)     â”‚         â”‚
â”‚     â”‚ â”œâ”€ HF: 1.09 (CRITICAL)     â”œâ”€ HF: 1.28 (SAFER!)        â”‚         â”‚
â”‚     â”‚ â”œâ”€ Risk: EMERGENCY         â”œâ”€ Risk: MODERATE            â”‚         â”‚
â”‚     â”‚ â””â”€ Urgency: 8/10           â””â”€ Urgency: 5/10             â”‚         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                          â”‚
â”‚  3. Log Success:                                                         â”‚
â”‚     âœ… Rebalancing execution successful!                                â”‚
â”‚     âœ… Position moved to Lido (7.50% APY)                               â”‚
â”‚     âœ… Health factor improved: 1.09 â†’ 1.28                              â”‚
â”‚     ðŸŽ‰ Liquidation risk reduced!                                         â”‚
â”‚                                                                          â”‚
â”‚  4. Continue Monitoring:                                                 â”‚
â”‚     â””â”€ Next check in 30 seconds...                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            ðŸŽ‰ FLOW COMPLETE! ðŸŽ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Total Time: ~2 seconds
Messages Sent: 4 (Alert â†’ Strategy â†’ Route â†’ Result)
Gas Cost: $0 (GASLESS!)
Position Status: SAVED! âœ…
Annual Extra Yield: $147.20 (+2.30% APY)
```

---

## ðŸ”€ Alternative Flows

### **Cross-Chain Rebalancing (Ethereum â†’ Solana)**

```
If Best Yield = Kamino (Solana) 9.1%:

1. Withdraw from Aave (Ethereum)
         â†“
2. Swap ETH â†’ PYUSD (1inch Fusion+)
         â†“
3. Bridge PYUSD via LayerZero (Ethereum â†’ Solana)
         â†“
4. Swap PYUSD â†’ SOL (Jupiter on Solana)
         â†“
5. Deposit SOL to Kamino (Solana)

Estimated Time: ~10 minutes (vs 2 seconds for same-chain)
Bridge Fee: ~$15 (vs $0 for same-chain)
```

---

## ðŸŽ¯ Agent Communication Patterns

### **Bureau Mode (Local Testing)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BUREAU                           â”‚
â”‚            (Single Process Container)               â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Position Monitor â”€â”                         â”‚  â”‚
â”‚  â”‚                    â”‚                         â”‚  â”‚
â”‚  â”‚  Yield Optimizer  â”€â”¼â”€> Direct Communication â”‚  â”‚
â”‚  â”‚                    â”‚   (In-Memory Messages)  â”‚  â”‚
â”‚  â”‚  Swap Optimizer   â”€â”¤                         â”‚  â”‚
â”‚  â”‚                    â”‚                         â”‚  â”‚
â”‚  â”‚  Executor         â”€â”˜                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  Pros:                                              â”‚
â”‚  âœ… Fast (<1ms latency)                             â”‚
â”‚  âœ… No network required                             â”‚
â”‚  âœ… Easy debugging                                  â”‚
â”‚                                                     â”‚
â”‚  Cons:                                              â”‚
â”‚  âŒ Single machine only                             â”‚
â”‚  âŒ Not globally discoverable                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Almanac Mode (Production)**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FETCH.AI ALMANAC  â”‚
                    â”‚  (Global Registry)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Agents Register & Discover
                               â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Agent 1 â”‚          â”‚ Agent 2 â”‚          â”‚ Agent 3 â”‚
    â”‚ Server 1â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Server 2â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Server 3â”‚
    â”‚ (Tokyo) â”‚          â”‚ (London)â”‚          â”‚ (NYC)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                      Messages routed globally
                      via Almanac smart contract

Pros:
âœ… Globally distributed
âœ… Fault-tolerant (agents can restart)
âœ… Scalable (add more agents easily)
âœ… Production-ready

Cons:
âŒ Slower (~1-2 sec latency)
âŒ Requires FET tokens for registration
âŒ Network dependent
```

---

## ðŸ§  MeTTa AI Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          METTA AI RISK ASSESSMENT LOGIC                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input: Health Factor (HF)
       â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ HF < 1.0?     â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚Yes    â”‚No
       â–¼       â”‚
   LIQUIDATED! â”‚
       â–²       â”‚
       â”‚       â–¼
       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   â”‚ HF < 1.3?     â”‚
       â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚       â”‚Yes    â”‚No
       â”‚       â–¼       â”‚
       â”‚   CRITICAL    â”‚
       â”‚   Urgency: 8  â”‚
       â”‚       â–²       â”‚
       â”‚       â”‚       â–¼
       â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚       â”‚   â”‚ HF < 1.5?     â”‚
       â”‚       â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚       â”‚       â”‚Yes    â”‚No
       â”‚       â”‚       â–¼       â”‚
       â”‚       â”‚    HIGH       â”‚
       â”‚       â”‚   Urgency: 6  â”‚
       â”‚       â”‚       â–²       â”‚
       â”‚       â”‚       â”‚       â–¼
       â”‚       â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚       â”‚       â”‚   â”‚ HF < 1.8?     â”‚
       â”‚       â”‚       â”‚   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚       â”‚       â”‚       â”‚Yes    â”‚No
       â”‚       â”‚       â”‚       â–¼       â”‚
       â”‚       â”‚       â”‚   MODERATE    â”‚
       â”‚       â”‚       â”‚   Urgency: 4  â”‚
       â”‚       â”‚       â”‚       â–²       â”‚
       â”‚       â”‚       â”‚       â”‚       â–¼
       â”‚       â”‚       â”‚       â”‚    SAFE
       â”‚       â”‚       â”‚       â”‚   Urgency: 2
       â”‚       â”‚       â”‚       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Assess Market  â”‚
              â”‚ Volatility     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Calculate      â”‚
              â”‚ Liquidation    â”‚
              â”‚ Probability    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Generate       â”‚
              â”‚ Recommended    â”‚
              â”‚ Actions        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA SOURCES                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ PRICES (every 60s)
         â”‚    â”œâ”€ Chainlink Oracles (on-chain, Ethereum)
         â”‚    â”œâ”€ CoinGecko API (off-chain, all chains)
         â”‚    â””â”€ Mock Prices (demo mode)
         â”‚
         â”œâ”€â”€â”€ PROTOCOL APYs (every 5 minutes)
         â”‚    â”œâ”€ DeFi Llama API (aggregated)
         â”‚    â”œâ”€ Protocol-specific APIs
         â”‚    â””â”€ Mock APYs (demo mode)
         â”‚
         â”œâ”€â”€â”€ POSITION DATA (real-time)
         â”‚    â”œâ”€ The Graph Subgraph (Aave V3)
         â”‚    â”œâ”€ Direct RPC calls (Ethereum)
         â”‚    â””â”€ Mock Positions (demo mode)
         â”‚
         â””â”€â”€â”€ SWAP QUOTES (on-demand)
              â”œâ”€ 1inch Fusion+ API (gasless swaps)
              â”œâ”€ LayerZero Bridge API (cross-chain)
              â””â”€ Mock Routes (demo mode)
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   CACHING LAYER       â”‚
         â”‚   (60s TTL)           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  AGENTS CONSUME DATA  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Generated**: October 22, 2025  
**Status**: âœ… Complete System Architecture Documented

ðŸŽ¯ **Use these diagrams to understand the complete system flow!**
